<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
<!-- BEGIN PAGE HEADER-->
<ng-include src="'app/partials/pagebar.html'"></ng-include>
<button ng-click="refreshData()" ng-disabled="$global.PatientVisitsReport.refreshing" class="btn green-haze pull-right">
    <i ng-class="$global.PatientVisitsReport.refreshing? 'fa fa-spin fa-refresh':'fa fa-refresh'"></i>
    <span ng-hide="$global.PatientVisitsReport.refreshing">Refresh</span>
    <span ng-show="$global.PatientVisitsReport.refreshing">Refreshing</span>
</button>
<h3 class="page-title">
{{$state.current.data.pageInfo.title}} <small>{{$state.current.data.pageInfo.titleDesc}}</small>
</h3>
<!-- END PAGE HEADER-->
<div class="clearfix">
</div>
<div class="row">
    <div class="col-md-12">
        <table id="patient-visit-report-table" class="table table-bordered table-advance">
            <thead>
                <tr class="">
                    <th class="vcenter"><strong>Organization</strong> <span class="pull-right"><em>Referring Entity</em></span></th>
                    <th>MTD ({{$global.PatientVisitsReport.mtdRange[0]|date:'yyyy'}})<br>{{$global.PatientVisitsReport.mtdRange[0]|date:'MMM dd'}} - {{$global.PatientVisitsReport.mtdRange[1]|date:'MMM dd'}}</th>
                    <th>MTD ({{$global.PatientVisitsReport.mtdLastRange[0]|date:'yyyy'}})<br>{{$global.PatientVisitsReport.mtdLastRange[0]|date:'MMM dd'}} - {{$global.PatientVisitsReport.mtdLastRange[1]|date:'MMM dd'}}</th>
                    <th>YTD ({{$global.PatientVisitsReport.ytdRange[0]|date:'yyyy'}})<br>{{$global.PatientVisitsReport.ytdRange[0]|date:'MMM dd'}} - {{$global.PatientVisitsReport.ytdRange[1]|date:'MMM dd'}}</th>
                    <th>YTD ({{$global.PatientVisitsReport.ytdLastRange[0]|date:'yyyy'}})<br>{{$global.PatientVisitsReport.ytdLastRange[0]|date:'MMM dd'}} - {{$global.PatientVisitsReport.ytdLastRange[1]|date:'MMM dd'}}</th>
                </tr>
            </thead>
            <tbody>
                <tr class="warning">
                    <td><strong>Total</strong></td>
                    <td><strong>{{$global.PatientVisitsReport.total.mtd}}</strong></td>
                    <td><strong>{{$global.PatientVisitsReport.total.mtd_last}}</strong></td>
                    <td><strong>{{$global.PatientVisitsReport.total.ytd}}</strong></td>
                    <td><strong>{{$global.PatientVisitsReport.total.ytd_last}}</strong></td>
                </tr>
                <tr ng-repeat-start="(orgId, orgData) in $global.PatientVisitsReport.tableData | orderObjectBy : 'org_name'">
                    <td><strong>{{orgData.org_name}}</strong></td>
                    <td ng-class="orgData.counts.mtd<orgData.counts.mtd_last? 'danger': 'success'"><strong>{{orgData.counts.mtd}}</strong></td>
                    <td><strong>{{orgData.counts.mtd_last}}</strong></td>
                    <td ng-class="orgData.counts.ytd<orgData.counts.ytd_last? 'danger': 'success'"><strong>{{orgData.counts.ytd}}</strong></td>
                    <td><strong>{{orgData.counts.ytd_last}}</strong></td>
                </tr>
                <tr ng-repeat-start="(eId, eData) in orgData.entities | orderObjectBy : 'entity_name'">
                    <td class="text-right"><em>{{eData.entity_name}}</em></td>
                    <td ng-class="eData.counts.mtd<eData.counts.mtd_last? 'danger': 'success'"><em>{{eData.counts.mtd}}</em></td>
                    <td><em>{{eData.counts.mtd_last}}</em></td>
                    <td ng-class="eData.counts.ytd<eData.counts.ytd_last? 'danger': 'success'"><em>{{eData.counts.ytd}}</em></td>
                    <td>{{eData.counts.ytd_last}}</td>
                </tr>
                <tr ng-repeat-end></tr>
                <tr ng-repeat-end ng-hide="true"></tr>

            </tbody>
        </table>
    </div>
</div>
